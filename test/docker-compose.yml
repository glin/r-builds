version: '2.0'

services:
  ubuntu-1804:
    image: ubuntu:bionic
    command: /test/test-deb.sh
    environment:
      - OS_IDENTIFIER=ubuntu-1804
      - R_VERSION=${R_VERSION}
    volumes:
      - ./:/test
      - ../builder/integration/tmp:/packages
  ubuntu-2004:
    image: ubuntu:focal
    command: /test/test-deb.sh
    environment:
      - OS_IDENTIFIER=ubuntu-2004
      - R_VERSION=${R_VERSION}
    volumes:
      - ./:/test
      - ../builder/integration/tmp:/packages
  ubuntu-2204:
    image: ubuntu:jammy
    command: /test/test-deb.sh
    environment:
      - OS_IDENTIFIER=ubuntu-2204
      - R_VERSION=${R_VERSION}
    volumes:
      - ./:/test
      - ../builder/integration/tmp:/packages
  debian-11:
    image: debian:bullseye
    command: /test/test-deb.sh
    environment:
      - OS_IDENTIFIER=debian-11
      - R_VERSION=${R_VERSION}
    volumes:
      - ./:/test
      - ../builder/integration/tmp:/packages
  debian-10:
    image: debian:buster
    command: /test/test-deb.sh
    environment:
      - OS_IDENTIFIER=debian-10
      - R_VERSION=${R_VERSION}
    volumes:
      - ./:/test
      - ../builder/integration/tmp:/packages
  centos-7:
    image: centos:centos7
    command: /test/test-centos.sh
    environment:
      - OS_IDENTIFIER=centos-7
      - R_VERSION=${R_VERSION}
    volumes:
      - ./:/test
      - ../builder/integration/tmp:/packages
  centos-8:
    image: rockylinux:8
    command: /test/test-centos.sh
    environment:
      - OS_IDENTIFIER=centos-8
      - R_VERSION=${R_VERSION}
    volumes:
      - ./:/test
      - ../builder/integration/tmp:/packages
  rhel-9:
    image: rockylinux:9
    command: /test/test-rhel.sh
    environment:
      - OS_IDENTIFIER=rhel-9
      - R_VERSION=${R_VERSION}
    volumes:
      - ./:/test
      - ../builder/integration/tmp:/packages
  opensuse-153:
    image: opensuse/leap:15.3
    command: /test/test-opensuse.sh
    environment:
      - OS_IDENTIFIER=opensuse-153
      - R_VERSION=${R_VERSION}
    volumes:
      - ./:/test
      - ../builder/integration/tmp:/packages
  opensuse-154:
    image: opensuse/leap:15.4
    command: /test/test-opensuse.sh
    environment:
      - OS_IDENTIFIER=opensuse-154
      - R_VERSION=${R_VERSION}
    volumes:
      - ./:/test
      - ../builder/integration/tmp:/packages
